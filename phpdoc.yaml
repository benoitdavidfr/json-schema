title: schema - validation de la conformité d'une instance à un schéma JSON
path: /schema
doc: |
  Validation d'un document par rapport à un schéma JSON (https://json-schema.org/)
  exemples dans ex et geojson
  
  $schema
    Le mot-clé est utilisé dans un schema JSON pour identifier le schéma auquel le document correspond
    J'étends cette utilisation en utilisant ce mot-clé dans n'importe quel document Yaml ou JSON
    soit pour référencer son schéma soit pour contenir en ligne le schéma sous la forme d'un fragment
    Lorsqu'un schéma est référencé, le nom ne doit pas comporter .schema.yaml qui est automatiquement ajouté
     
  Mécanisme de registre de schéma:
    J'utilise l'URI http://{name}.georef.eu/ pour identifier et localiser des schémas locaux
    Les URI de la forme http://schema.georef.eu/{path} sont transformés en __DIR__./{path}
    Ceux de la forme http://{name}.georef.eu/ sont transformés en __DIR__./../{name}/{path}
    Par ailleurs, je définis un certain nombre de schémas stockés en local tels que:
      - http://json-schema.org/schema# (Core schema meta-schema)
      - http://json-schema.org/draft-07/schema# (idem)
      - http://geojson.org/schema/FeatureCollection.json (schema GeoJSON)
      
  A FAIRE:
    - améliorer les alertes
    - améliorer la gestion des répertoires
      il faudrait plus facilement référencer un chemin dans l'appel de check notamment dans l'appel interactif
journal: |
  24/1/2019:
    utilisation du mot-clé $schema à la place de jSchema
  19/1/2019:
    scission de jsonschema.inc.php en 2
    ajout d'une option d'affichage à la méthode JsonSchema::check() et d'une méthode JsonSchema::autoCheck()
    publication sur Github
    mise en oeuvre de la vérification interactive avec un schéma prédéfini
    amélioration des erreurs pour oneOf et anyOf en retournant les erreurs rencontrées dans les sous-schémas
  18/1/2019:
    définition ci-dessus du mécanisme de registre de schéma et mise en oeuvre dans le validateur
    publication sur Github
  1-14/1/2019:
    améliorations de jsonschema.inc.php et définition d'une suite de tests
  31/12/2018:
    création de ce projet
phpScripts:
  - /schema/index.php
  - /schema/tests.php
phpIncludes:
  - /schema/jsonschema.inc.php
  - /schema/jsonschfrt.inc.php
htmlFiles:
  - /schema/json-schema.schema.yaml
  - /schema/tests.schema.yaml
  - /schema/predef.yaml
  - /schema/tests.yaml
  - /schema/testsformat.yaml
  - /schema/tests2.yaml
